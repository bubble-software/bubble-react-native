{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"/Users/mattdizon/Desktop/use this /bubble-react-native/src/navigation/Navigation.tsx\";\n\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport { NavigationContainer } from '@react-navigation/native';\nimport React, { useEffect, useState } from 'react';\nimport View from \"react-native-web/dist/exports/View\";\nimport { IsAuthenticated } from \"../auth/IsAuthenticated\";\nimport { AuthContext } from \"../providers/AuthProvider/AuthProvider\";\nimport { BUBBLEBLUE, WHITE } from \"../theme/theme\";\nimport { clearStorage, getAsyncStorageItem } from \"../utils/asyncStorage\";\nimport { navigationRef } from \"./RootNavigation\";\nexport var Navigation = function Navigation() {\n  var _useState = useState(true),\n      _useState2 = _slicedToArray(_useState, 1),\n      isLoading = _useState2[0];\n\n  var _useState3 = useState(),\n      _useState4 = _slicedToArray(_useState3, 2),\n      credentials = _useState4[0],\n      setCredentials = _useState4[1];\n\n  var authContext = React.useMemo(function () {\n    return {\n      credentials: credentials,\n      signIn: function signIn(credentials) {\n        setCredentials(credentials);\n      },\n      signOut: function signOut() {\n        return _regeneratorRuntime.async(function signOut$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                setCredentials(undefined);\n                _context.next = 3;\n                return _regeneratorRuntime.awrap(clearStorage());\n\n              case 3:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, null, null, null, Promise);\n      }\n    };\n  }, [credentials]);\n\n  var getData = function getData() {\n    var storageCredentials;\n    return _regeneratorRuntime.async(function getData$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            _context2.prev = 0;\n            _context2.next = 3;\n            return _regeneratorRuntime.awrap(getAsyncStorageItem('credentials'));\n\n          case 3:\n            storageCredentials = _context2.sent;\n\n            if (storageCredentials !== null) {\n              setCredentials(JSON.parse(storageCredentials));\n            }\n\n            _context2.next = 10;\n            break;\n\n          case 7:\n            _context2.prev = 7;\n            _context2.t0 = _context2[\"catch\"](0);\n            console.log('err');\n\n          case 10:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, null, null, [[0, 7]], Promise);\n  };\n\n  useEffect(function () {\n    getData();\n  }, []);\n  return React.createElement(AuthContext.Provider, {\n    value: authContext,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 3\n    }\n  }, !isLoading ? React.createElement(View, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 9\n    }\n  }, \" \") : React.createElement(NavigationContainer, {\n    theme: theme,\n    ref: navigationRef,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 9\n    }\n  }, React.createElement(IsAuthenticated, {\n    credentials: credentials,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 7\n    }\n  })));\n};\nvar theme = {\n  colors: {\n    primary: BUBBLEBLUE,\n    background: BUBBLEBLUE,\n    card: BUBBLEBLUE,\n    text: WHITE\n  }\n};","map":{"version":3,"sources":["/Users/mattdizon/Desktop/use this /bubble-react-native/src/navigation/Navigation.tsx"],"names":["NavigationContainer","React","useEffect","useState","IsAuthenticated","AuthContext","BUBBLEBLUE","WHITE","clearStorage","getAsyncStorageItem","navigationRef","Navigation","isLoading","credentials","setCredentials","authContext","useMemo","signIn","signOut","undefined","getData","storageCredentials","JSON","parse","console","log","theme","colors","primary","background","card","text"],"mappings":";;;;;;AAAA,SAASA,mBAAT,QAAoC,0BAApC;AACA,OAAOC,KAAP,IAAgBC,SAAhB,EAA2BC,QAA3B,QAA2C,OAA3C;;AAEA,SAASC,eAAT;AACA,SAASC,WAAT;AACA,SAASC,UAAT,EAAqBC,KAArB;AACA,SAASC,YAAT,EAAuBC,mBAAvB;AACA,SAASC,aAAT;AAIA,OAAO,IAAMC,UAAU,GAAG,SAAbA,UAAa,GAAmB;AAC3C,kBAAoBR,QAAQ,CAAC,IAAD,CAA5B;AAAA;AAAA,MAAOS,SAAP;;AACA,mBAAsCT,QAAQ,EAA9C;AAAA;AAAA,MAAOU,WAAP;AAAA,MAAoBC,cAApB;;AAEA,MAAMC,WAAW,GAAGd,KAAK,CAACe,OAAN,CAAc,YAAM;AACtC,WAAO;AACLH,MAAAA,WAAW,EAAXA,WADK;AAELI,MAAAA,MAAM,EAAE,gBAACJ,WAAD,EAAsB;AAC5BC,QAAAA,cAAc,CAACD,WAAD,CAAd;AACD,OAJI;AAKLK,MAAAA,OAAO,EAAE;AAAA;AAAA;AAAA;AAAA;AACPJ,gBAAAA,cAAc,CAACK,SAAD,CAAd;AADO;AAAA,iDAEDX,YAAY,EAFX;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AALJ,KAAP;AAUD,GAXmB,EAWjB,CAACK,WAAD,CAXiB,CAApB;;AAaA,MAAMO,OAAO,GAAG,SAAVA,OAAU;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,6CAEqBX,mBAAmB,CAAC,aAAD,CAFxC;;AAAA;AAENY,YAAAA,kBAFM;;AAGZ,gBAAIA,kBAAkB,KAAK,IAA3B,EAAiC;AAC/BP,cAAAA,cAAc,CAACQ,IAAI,CAACC,KAAL,CAAWF,kBAAX,CAAD,CAAd;AACD;;AALW;AAAA;;AAAA;AAAA;AAAA;AAOZG,YAAAA,OAAO,CAACC,GAAR,CAAY,KAAZ;;AAPY;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAhB;;AAWAvB,EAAAA,SAAS,CAAC,YAAM;AACdkB,IAAAA,OAAO;AACR,GAFQ,EAEN,EAFM,CAAT;AAIA,SACA,oBAAC,WAAD,CAAa,QAAb;AAAsB,IAAA,KAAK,EAAEL,WAA7B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAEE,CAACH,SAAD,GACI,oBAAC,IAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SADJ,GAEI,oBAAC,mBAAD;AAAqB,IAAA,KAAK,EAAEc,KAA5B;AAAmC,IAAA,GAAG,EAAEhB,aAAxC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACF,oBAAC,eAAD;AAAiB,IAAA,WAAW,EAAEG,WAA9B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADE,CAJN,CADA;AAWD,CA3CM;AA6CP,IAAMa,KAAK,GAAG;AACZC,EAAAA,MAAM,EAAE;AACNC,IAAAA,OAAO,EAAEtB,UADH;AAENuB,IAAAA,UAAU,EAAEvB,UAFN;AAGNwB,IAAAA,IAAI,EAAExB,UAHA;AAINyB,IAAAA,IAAI,EAAExB;AAJA;AADI,CAAd","sourcesContent":["import { NavigationContainer } from '@react-navigation/native'\nimport React, { useEffect, useState } from 'react'\nimport { View } from 'react-native'\nimport { IsAuthenticated } from '../auth/IsAuthenticated'\nimport { AuthContext } from '../providers/AuthProvider/AuthProvider'\nimport { BUBBLEBLUE, WHITE } from '../theme/theme'\nimport { clearStorage, getAsyncStorageItem } from '../utils/asyncStorage'\nimport { navigationRef } from './RootNavigation'\n\n// show loading screen first\n// then choose if logged in or not\nexport const Navigation = (): JSX.Element => {\n  const [isLoading] = useState(true)\n  const [credentials, setCredentials] = useState<any | undefined>()\n\n  const authContext = React.useMemo(() => {\n    return {\n      credentials,\n      signIn: (credentials: any) => {\n        setCredentials(credentials)\n      },\n      signOut: async () => {\n        setCredentials(undefined)\n        await clearStorage()\n      },\n    }\n  }, [credentials])\n\n  const getData = async () => {\n    try {\n      const storageCredentials = await getAsyncStorageItem('credentials')\n      if (storageCredentials !== null) {\n        setCredentials(JSON.parse(storageCredentials))\n      }\n    } catch (e) {\n      console.log('err')\n    }\n  }\n\n  useEffect(() => {\n    getData()\n  }, [])\n\n  return (\n\t\t<AuthContext.Provider value={authContext}>\n\t\t\t{\n\t\t\t\t!isLoading\n\t\t\t\t  ? <View> </View>\n\t\t\t\t  : <NavigationContainer theme={theme} ref={navigationRef}>\n\t\t\t\t\t\t<IsAuthenticated credentials={credentials}/>\n\t\t\t\t\t</NavigationContainer>\n\t\t\t}\n\t\t</AuthContext.Provider>\n  )\n}\n\nconst theme = {\n  colors: {\n    primary: BUBBLEBLUE,\n    background: BUBBLEBLUE,\n    card: BUBBLEBLUE,\n    text: WHITE,\n  },\n}\n"]},"metadata":{},"sourceType":"module"}