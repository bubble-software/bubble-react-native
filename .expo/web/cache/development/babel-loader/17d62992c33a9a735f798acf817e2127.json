{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"/Users/mattdizon/Desktop/bubble-react-native/src/navigation/Navigation.tsx\";\n\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport { NavigationContainer } from '@react-navigation/native';\nimport React, { useEffect, useState } from 'react';\nimport View from \"react-native-web/dist/exports/View\";\nimport { IsAuthenticated } from \"../auth/IsAuthenticated\";\nimport { AuthContext } from \"../providers/AuthProvider/AuthProvider\";\nimport { BUBBLEBLUE, WHITE } from \"../theme/theme\";\nimport { clearStorage, getAsyncStorageItem, setAsyncStorageItem } from \"../utils/asyncStorage\";\nimport { navigationRef } from \"./RootNavigation\";\nexport var Navigation = function Navigation() {\n  var _useState = useState(true),\n      _useState2 = _slicedToArray(_useState, 2),\n      isLoading = _useState2[0],\n      setIsLoading = _useState2[1];\n\n  var _useState3 = useState(),\n      _useState4 = _slicedToArray(_useState3, 2),\n      credentials = _useState4[0],\n      setCredentials = _useState4[1];\n\n  var authContext = React.useMemo(function () {\n    return {\n      credentials: credentials,\n      signIn: function signIn(credentials) {\n        setCredentials(credentials);\n      },\n      signOut: function signOut() {\n        return _regeneratorRuntime.async(function signOut$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                setCredentials(undefined);\n                _context.next = 3;\n                return _regeneratorRuntime.awrap(clearStorage());\n\n              case 3:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, null, null, null, Promise);\n      }\n    };\n  }, [credentials]);\n\n  var getData = function getData() {\n    var storageCredentials, jwt;\n    return _regeneratorRuntime.async(function getData$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            _context2.prev = 0;\n            _context2.next = 3;\n            return _regeneratorRuntime.awrap(getAsyncStorageItem('credentials'));\n\n          case 3:\n            storageCredentials = _context2.sent;\n\n            if (!(storageCredentials !== null)) {\n              _context2.next = 9;\n              break;\n            }\n\n            jwt = JSON.parse(storageCredentials);\n            setCredentials(jwt);\n            _context2.next = 9;\n            return _regeneratorRuntime.awrap(setAsyncStorageItem('me', JSON.stringify(userData)));\n\n          case 9:\n            _context2.next = 14;\n            break;\n\n          case 11:\n            _context2.prev = 11;\n            _context2.t0 = _context2[\"catch\"](0);\n            console.log('err');\n\n          case 14:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, null, null, [[0, 11]], Promise);\n  };\n\n  useEffect(function () {\n    getData();\n  }, []);\n  return React.createElement(AuthContext.Provider, {\n    value: authContext,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 5\n    }\n  }, !isLoading ? React.createElement(View, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 13\n    }\n  }, \" \") : React.createElement(NavigationContainer, {\n    theme: theme,\n    ref: navigationRef,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 13\n    }\n  }, React.createElement(IsAuthenticated, {\n    credentials: credentials,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 15\n    }\n  })));\n};\nvar theme = {\n  colors: {\n    primary: BUBBLEBLUE,\n    background: BUBBLEBLUE,\n    card: BUBBLEBLUE,\n    text: WHITE\n  }\n};","map":{"version":3,"sources":["/Users/mattdizon/Desktop/bubble-react-native/src/navigation/Navigation.tsx"],"names":["NavigationContainer","React","useEffect","useState","IsAuthenticated","AuthContext","BUBBLEBLUE","WHITE","clearStorage","getAsyncStorageItem","setAsyncStorageItem","navigationRef","Navigation","isLoading","setIsLoading","credentials","setCredentials","authContext","useMemo","signIn","signOut","undefined","getData","storageCredentials","jwt","JSON","parse","stringify","userData","console","log","theme","colors","primary","background","card","text"],"mappings":";;;;;;AAAA,SAASA,mBAAT,QAAoC,0BAApC;AACA,OAAOC,KAAP,IAAgBC,SAAhB,EAA2BC,QAA3B,QAA2C,OAA3C;;AAEA,SAASC,eAAT;AACA,SAASC,WAAT;AACA,SAASC,UAAT,EAAqBC,KAArB;AACA,SAASC,YAAT,EAAuBC,mBAAvB,EAA4CC,mBAA5C;AACA,SAAQC,aAAR;AAIA,OAAO,IAAMC,UAAU,GAAG,SAAbA,UAAa,GAAM;AAE9B,kBAAkCT,QAAQ,CAAC,IAAD,CAA1C;AAAA;AAAA,MAAOU,SAAP;AAAA,MAAkBC,YAAlB;;AACA,mBAAsCX,QAAQ,EAA9C;AAAA;AAAA,MAAOY,WAAP;AAAA,MAAoBC,cAApB;;AAEA,MAAMC,WAAW,GAAGhB,KAAK,CAACiB,OAAN,CAAc,YAAM;AACtC,WAAO;AACLH,MAAAA,WAAW,EAAXA,WADK;AAELI,MAAAA,MAAM,EAAE,gBAACJ,WAAD,EAAsB;AAC5BC,QAAAA,cAAc,CAACD,WAAD,CAAd;AACD,OAJI;AAKLK,MAAAA,OAAO,EAAE;AAAA;AAAA;AAAA;AAAA;AACPJ,gBAAAA,cAAc,CAACK,SAAD,CAAd;AADO;AAAA,iDAEDb,YAAY,EAFX;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AALJ,KAAP;AAUD,GAXmB,EAWjB,CAACO,WAAD,CAXiB,CAApB;;AAaA,MAAMO,OAAO,GAAG,SAAVA,OAAU;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,6CAEqBb,mBAAmB,CAAC,aAAD,CAFxC;;AAAA;AAENc,YAAAA,kBAFM;;AAAA,kBAGRA,kBAAkB,KAAK,IAHf;AAAA;AAAA;AAAA;;AAIJC,YAAAA,GAJI,GAIEC,IAAI,CAACC,KAAL,CAAWH,kBAAX,CAJF;AAKVP,YAAAA,cAAc,CAACQ,GAAD,CAAd;AALU;AAAA,6CAMJd,mBAAmB,CAAC,IAAD,EAAOe,IAAI,CAACE,SAAL,CAAeC,QAAf,CAAP,CANf;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAUZC,YAAAA,OAAO,CAACC,GAAR,CAAY,KAAZ;;AAVY;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAhB;;AAcA5B,EAAAA,SAAS,CAAC,YAAM;AACdoB,IAAAA,OAAO;AACR,GAFQ,EAEN,EAFM,CAAT;AAIA,SACE,oBAAC,WAAD,CAAa,QAAb;AAAsB,IAAA,KAAK,EAAEL,WAA7B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAEI,CAACJ,SAAD,GACI,oBAAC,IAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SADJ,GAEI,oBAAC,mBAAD;AAAqB,IAAA,KAAK,EAAEkB,KAA5B;AAAmC,IAAA,GAAG,EAAEpB,aAAxC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,oBAAC,eAAD;AAAiB,IAAA,WAAW,EAAEI,WAA9B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,CAJR,CADF;AAWD,CA/CM;AAiDP,IAAMgB,KAAK,GAAG;AACZC,EAAAA,MAAM,EAAE;AACJC,IAAAA,OAAO,EAAE3B,UADL;AAEJ4B,IAAAA,UAAU,EAAE5B,UAFR;AAGJ6B,IAAAA,IAAI,EAAE7B,UAHF;AAIJ8B,IAAAA,IAAI,EAAE7B;AAJF;AADI,CAAd","sourcesContent":["import { NavigationContainer } from '@react-navigation/native'\nimport React, { useEffect, useState } from 'react'\nimport { View } from 'react-native'\nimport { IsAuthenticated } from '../auth/IsAuthenticated'\nimport { AuthContext } from '../providers/AuthProvider/AuthProvider'\nimport { BUBBLEBLUE, WHITE } from '../theme/theme'\nimport { clearStorage, getAsyncStorageItem, setAsyncStorageItem } from '../utils/asyncStorage'\nimport {navigationRef} from './RootNavigation'\n\n// show loading screen first\n// then choose if logged in or not\nexport const Navigation = () => {\n\n  const [isLoading, setIsLoading] = useState(true)\n  const [credentials, setCredentials] = useState<any | undefined>()\n\n  const authContext = React.useMemo(() => {\n    return {\n      credentials,\n      signIn: (credentials: any) => {\n        setCredentials(credentials)\n      },\n      signOut: async () => {\n        setCredentials(undefined)\n        await clearStorage()\n      },\n    }\n  }, [credentials])\n\n  const getData = async () => {\n    try {\n      const storageCredentials = await getAsyncStorageItem('credentials')\n      if (storageCredentials !== null) {\n        const jwt = JSON.parse(storageCredentials)\n        setCredentials(jwt)\n        await setAsyncStorageItem('me', JSON.stringify(userData))\n\n      }\n    } catch (e) {\n      console.log('err')\n    }\n  }\n\n  useEffect(() => {\n    getData()\n  }, [])\n\n  return (\n    <AuthContext.Provider value={authContext}>\n      { \n        !isLoading\n          ? <View> </View>\n          : <NavigationContainer theme={theme} ref={navigationRef}>\n              <IsAuthenticated credentials={credentials}/>\n          </NavigationContainer>\n        }\n    </AuthContext.Provider>\n  )\n}\n\nconst theme = {\n  colors: {\n      primary: BUBBLEBLUE,\n      background: BUBBLEBLUE,\n      card: BUBBLEBLUE,\n      text: WHITE,\n  }\n};"]},"metadata":{},"sourceType":"module"}